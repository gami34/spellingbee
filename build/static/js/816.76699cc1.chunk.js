"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[816],{4530:function(e,t,n){n.d(t,{y:function(){return c},C:function(){return u}});var r=n(1413),o=n(5861),a=n(7757),s=n.n(a),i=n(4569),l=n.n(i),c=function(e){return function(){var t=(0,o.Z)(s().mark((function t(n,r){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"BILLING",payload:{data:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},u=function(e){return function(){var t=(0,o.Z)(s().mark((function t(n,o){var a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o(),t.next=3,l().post("http://localhost:8080/registration",(0,r.Z)((0,r.Z)((0,r.Z)({},a.user.data),e),{},{payment_platform:"flutterwave"}));case 3:i=t.sent,c=i.data,n({type:"SERVER_REGISTRATION_RESPONSE",payload:{data:!0===c.success?"success":"failed"}});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},9816:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(9439),o=n(2791),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(t){a(t)}}function i(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}l((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(i){a=[6,i],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var l={},c="https://checkout.flutterwave.com/v3.js";function u(e){var t=function(){var e=(0,o.useState)({loaded:!1,error:!1}),t=e[0],n=e[1];return(0,o.useEffect)((function(){if(!l.hasOwnProperty(c)){l.src=c;var e=document.createElement("script");e.src=c,e.async=!0;var t=function(){n({loaded:!0,error:!1})},r=function(){delete l.src,n({loaded:!0,error:!0})};return e.addEventListener("load",t),e.addEventListener("complete",t),e.addEventListener("error",r),document.body.appendChild(e),function(){e.removeEventListener("load",t),e.removeEventListener("error",r)}}n({loaded:!0,error:!1})}),[]),[t.loaded,t.error]}(),n=t[0],r=t[1];return(0,o.useEffect)((function(){if(r)throw new Error("Unable to load flutterwave payment modal")}),[r]),function(t){var o,l,c=this,u=t.callback,d=t.onClose;if(r)throw new Error("Unable to load flutterwave payment modal");if(n){var p=a(a({},e),{amount:null!==(o=e.amount)&&void 0!==o?o:0,callback:function(t){return s(c,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return"successful"!==t.status?[3,2]:(u(t),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:e.public_key,language:"Flutterwave-React-v3",version:"1.0.7",title:(null===e||void 0===e?void 0:e.payment_options.split(",").length)>1?"Initiate-Charge-Multiple":"Initiate-Charge-"+(null===e||void 0===e?void 0:e.payment_options),message:"15s"})})]);case 1:return r.sent(),[3,4];case 2:return u(t),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:null!==(n=e.public_key)&&void 0!==n?n:"",language:"Flutterwave-React-v3",version:"1.0.7",title:(null===e||void 0===e?void 0:e.payment_options.split(",").length)>1?"Initiate-Charge-Multiple-error":"Initiate-Charge-"+(null===e||void 0===e?void 0:e.payment_options)+"-error",message:"15s"})})];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},onclose:d,payment_options:null!==(l=null===e||void 0===e?void 0:e.payment_options)&&void 0!==l?l:"card, ussd, mobilemoney"});return window.FlutterwaveCheckout&&window.FlutterwaveCheckout(p)}}}var d=n(6030),p=n(3503),f=n(7309),m=n(3504),h=n(6871),v=n(4530),g=n(5933),y=n(184),w=function(){var e,t,n=(0,d.v9)((function(e){return e.user})).billing,a=(0,o.useState)(!1),s=(0,r.Z)(a,2),i=s[0],l=s[1],c=u((e=n&&n.amount,t={name:n&&n.name,email:n&&n.email,phonenumber:n&&n.phonenumber},{public_key:"FLWPUBK-636b8dacdc86a1f48801c837082cee03-X",tx_ref:Date.now().toString(),amount:e,currency:"NGN",payment_options:"card,mobilemoney,ussd",customer:t,customizations:{title:"Spelling Bee",description:"Payment for your students",logo:"https://res.cloudinary.com/givesolutions/image/upload/v1644341075/spellingbee/photo1643823862_b8lwym.jpg"}})),w=(0,h.s0)(),b=(0,d.I0)();return(0,o.useEffect)((function(){}),[location.pathname]),(0,y.jsx)(y.Fragment,{children:n?(0,y.jsx)("div",{className:"h-screen bg-gray-400 flex items-center justify-center overflow-hidden",children:(0,y.jsxs)("div",{className:"mim-w-80 m-6 w-full sm:w-6/12 min-h-80 rounded shadow-lg shadow-green-dark  bg-gray-50",children:[(0,y.jsxs)("h3",{className:"h-12 mt-4 bg-yellow-400 shadow-lg flex justify-between pl-6 items-center",children:[(0,y.jsx)("span",{className:"text-lg font-bold",children:"SpellingBee"}),(0,y.jsx)(m.rU,{className:"w-24 h-24 -mr-4 rounded-full shadow-lg shadow-gray-600",to:"/",children:(0,y.jsx)("img",{className:"w-24 h-24 -mr-4 rounded-full shadow-lg shadow-gray-600",src:g,alt:""})})]}),(0,y.jsxs)("div",{className:"p-6 overflow-hidden",children:[(0,y.jsxs)(p.Z,{size:"small",current:1,children:[(0,y.jsx)(p.Z.Step,{title:"Finished",subTitle:"School Information Registration."}),(0,y.jsx)(p.Z.Step,{title:"In Progress",subTitle:"Payment."})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2  mt-6",children:[(0,y.jsx)("span",{className:"text-right p-1 font-semibold text-lg",children:"Number of Student:"}),(0,y.jsx)("span",{className:"text-left flex items-center pl-4",children:n.numberOfStudent})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2",children:[(0,y.jsx)("span",{className:"text-right p-1 font-semibold text-lg",children:"Amount:"}),(0,y.jsxs)("span",{className:"text-left flex items-center pl-4",children:["\u20a6",n.amount]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2",children:[(0,y.jsx)("span",{className:"text-right p-1 font-semibold text-lg",children:"School Name:"}),(0,y.jsx)("span",{className:"text-left flex items-center pl-4",children:n.name})]}),(0,y.jsxs)("div",{className:"grid grid-cols-2 mb-6",children:[(0,y.jsx)("span",{className:"text-right p-1 font-semibold text-lg",children:"School Email:"}),(0,y.jsx)("span",{className:"text-left flex items-center pl-4",children:n.email})]}),(0,y.jsx)(f.Z,{type:"primary",loading:i,className:"w-full",onClick:function(){l(!0),c({callback:function(e){b((0,v.C)(e)),document.getElementsByName("checkout").forEach((function(e){e.setAttribute("style","position:fixed;top:0;left:0;z-index:-1;border:none;opacity:0;pointer-events:none;width:100%;height:100%;"),e.setAttribute("id","flwpugpaidid"),e.setAttribute("src","https://checkout.flutterwave.com/?"),document.body.style.overflow=""})),w("/registrationcomplete")},onClose:function(){console.log("payment modal now closed")}})},value:"Pay Now",children:"Pay Now"})]})]})}):(0,y.jsx)(h.Fg,{to:"/"})})},b=(0,o.memo)(w)},5933:function(e,t,n){e.exports=n.p+"static/media/cb1.34016d91a8e1bfc26282.jpeg"}}]);
//# sourceMappingURL=816.76699cc1.chunk.js.map